#!/bin/bash

PROJECT_DIR=$(pwd)
LIB_DIR="$PROJECT_DIR/lib"
PACKAGE_NAME=$(basename "$PROJECT_DIR")

if [ ! -d "$LIB_DIR" ]; then
  echo "No lib directory found. Make sure you run this script from the project root."
  exit 1
fi

find "$LIB_DIR" -name "*.dart" | while read -r file; do
  sed -i -E "s@^(import|export) ['\"](\.\.?/[^'\"]+)['\"]\s*;@\1 'package:$PACKAGE_NAME\2';@g" "$file"
  echo "Updated: $file"
done

echo "Conversion completed."
